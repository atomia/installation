<% $i = 1 %>
<resourceDescription xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <bindings xdt:Locator="XPath(//bindings[moduleList/module/@name='Atomia.Provisioning.Modules.MSSQL.MSSQL'])">
    <resourceList>
<% while $i <= @number_of_mssql_servers.to_i do %>
      <resource name="MSSQL<%= $i %>" xdt:Transform="Insert">
        <property name="DatabaseServer"><%= @mssql_ip_address[$i - 1] %></property>
        <property name="PublicIpAddress"><%= @mssql_ip_address[$i - 1] %></property>
        <property name="User"><%= @mssql_username %></property>
        <property name="Password"><%= @mssql_password %></property>
        <property name="InitialCatalog">master</property>
        <property name="AdminIpAddress"><%= @mssql_ip_address[$i - 1] %></property>      
      </resource>
<% $i = $i + 1 %>
<% end %>
    </resourceList>
  </bindings>
</resourceDescription>

